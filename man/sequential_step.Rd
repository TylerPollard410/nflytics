% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stan_helpers.R
\name{sequential_step}
\alias{sequential_step}
\title{One sequential step: predict next weeks (GQ) then optionally roll fit window and refit}
\usage{
sequential_step(
  fit_mod,
  gq_mod,
  fit,
  fit_stan_data,
  schedule_df,
  horizon = 1L,
  refit_after = TRUE,
  refit_weeks = 1L,
  seed = 52,
  sig_figs = 10,
  chains = 4,
  parallel_chains = min(4L, parallel::detectCores()),
  iter_warmup = 500,
  iter_sampling = 1000,
  adapt_delta = 0.9,
  max_treedepth = 10,
  warm_start = TRUE,
  reuse_metric = TRUE
)
}
\arguments{
\item{fit_mod}{Compiled mod_fit model}

\item{gq_mod}{Compiled mod_gq model}

\item{fit}{Current fitted object from mod_fit}

\item{fit_stan_data}{Current training data list}

\item{schedule_df}{Full indexed schedule}

\item{horizon}{Weeks ahead to predict (default 1)}

\item{refit_after}{If TRUE, roll window by \code{refit_weeks} and refit}

\item{refit_weeks}{How many weeks to extend the fit window (default 1)}

\item{seed}{RNG seed}

\item{parallel_chains}{Integer}

\item{iter_warmup, iter_sampling, adapt_delta, max_treedepth}{Fitting controls}
}
\value{
list(fit = fit_new, fit_stan_data = fit_data_new, gq = gq_obj, targets = vector)
}
\description{
One sequential step: predict next weeks (GQ) then optionally roll fit window and refit
}
